import{a as m,t as w,b as j}from"../chunks/SI6mN8m1.js";import{c as u,s as r,ac as de,r as s,t as A,p as pe,a as ve,Y as _,i as f,Z as E,f as J,_ as M}from"../chunks/CLCQMGy1.js";import{s as X}from"../chunks/CBxGpUP-.js";import{i as P}from"../chunks/DQDxrTn_.js";import{c as p}from"../chunks/CZCvMaXn.js";import{h as ue}from"../chunks/5RkkGgyE.js";import{r as me}from"../chunks/CDBV_DXI.js";import{d as ee}from"../chunks/BqIurHQI.js";import{b as fe}from"../chunks/WuYwEo5p.js";import{p as K}from"../chunks/QqrkGhaP.js";import{o as be,a as ge}from"../chunks/BzkzniNO.js";import{$ as _e}from"../chunks/DllVzHVf.js";import{p as R}from"../chunks/CUYT_pNl.js";/* empty css                */import{s as we}from"../chunks/05KXkFAK.js";import{p as Q}from"../chunks/DUBbKwlB.js";var he=w('<div class="remote-button svelte-h7t4ie"> <button class="btn btn-circle btn-color svelte-h7t4ie"><!></button></div>');function c(U,I){let h=Q(I,"label",3,""),D=Q(I,"clickHandler",3,()=>{});var k=he(),T=u(k),$=r(T);$.__click=function(...l){var i;(i=D())==null||i.apply(this,l)};var y=u($);we(y,()=>I.children??de),s($),s(k),A(()=>X(T,`${h()??""} `)),m(U,k)}ee(["click"]);var ye=w('<meta name="apple-mobile-web-app-capable" content="yes">'),Ce=w("<p> </p>"),ke=w('<!> <div class="window active"><div class="title-bar">Connect</div> <div class="p-2"><p>Enter the pairing code from the TV</p> <input type="text" class="input input-bordered w-full max-w-xs"> <button class="btn btn-primary">Connect</button></div></div>',1),xe=w('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),He=w('<div class="grid grid-cols-3 gap-2 align-center mb-6"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <div></div> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Pe=w('<div class="flex flex-col gap-2 text-white items-center">VOLUME <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),$e=w('<div class="flex flex-col gap-2 text-white items-center">CHANNEL <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Se=w('<div class="desktop p-4"><!> <div class="mt-6 flex justify-center"><div class="window remote svelte-13uf4q4"><div class="p-4"><div class="flex flex-wrap gap-4 justify-around mb-6"><!> <!></div> <!> <div class="flex flex-wrap justify-around mb-6"><!> <!></div></div></div></div></div>');function Ye(U,I){pe(I,!0);let h=E(void 0),D=E(!1),k="",T=9e3,$="/",y=E(""),l,i,L,x=E("");be(()=>{k=R.url.searchParams.get("server")??"",T=parseInt(R.url.searchParams.get("port")??"9000"),$=R.url.searchParams.get("path")??"/",_(y,K(R.url.searchParams.get("id")??"")),l=new _e(null,k?{host:k,port:T,path:$,debug:3}:{debug:3}),l.on("open",function(e){l.id===null?(console.debug("Received null id from peer open"),l.id=sessionStorage.lastPeerId):sessionStorage.lastPeerId=l.id,console.debug("ID: "+l.id),_(x,"Waiting to connect...")}),l.on("connection",function(e){console.log("Connection"),e.on("open",function(){console.log("Sender does not accept incoming connections"),e.send("Sender does not accept incoming connections"),L=setTimeout(function(){e.close()},500)})}),l.on("disconnected",function(){_(x,"Connection lost. Please reconnect"),console.debug("Connection lost. Please reconnect"),l.id=sessionStorage.lastPeerId,l._lastServerId=sessionStorage.lastPeerId,l.reconnect()}),l.on("close",function(){i=null,_(x,"Connection destroyed. Please refresh"),console.debug("Connection destroyed")}),l.on("error",function(e){console.error(e),alert(""+e)})}),ge(()=>{i&&i.close(),l==null||l.destroy(),L&&clearTimeout(L)});function te(){console.debug("connecting to",f(y)),i&&i.close(),i=l.connect(f(y),{reliable:!0}),i.on("data",function(e){console.debug("Received",e),e&&_(h,K(e))}),i.on("open",function(){_(x,"Connected to: "+i.peer),console.debug("Connected to: "+i.peer),_(D,!0)}),i.on("close",function(){_(x,"Connection closed"),_(D,!1)})}function a(e){console.debug("sending command",e),i.send(e)}var N=Se();ue(e=>{var o=ye();m(e,o)});var B=u(N);{var oe=e=>{var o=ke(),t=J(o);{var v=g=>{var C=Ce(),S=u(C,!0);s(C),A(()=>X(S,f(x))),m(g,C)};P(t,g=>{f(x)&&g(v)})}var d=r(t,2),b=r(u(d),2),n=r(u(b),2);me(n);var H=r(n,2);H.__click=te,s(b),s(d),A(()=>H.disabled=!f(y)),fe(n,()=>f(y),g=>_(y,g)),m(e,o)};P(B,e=>{f(D)||e(oe)})}var O=r(B,2),W=u(O),Y=u(W),V=u(Y),Z=u(V);{var se=e=>{c(e,{label:"Muting",clickHandler:()=>a("mute")})};P(Z,e=>{var o,t;((t=(o=f(h))==null?void 0:o.kiosk)==null?void 0:t.volumeControls)!==!1&&e(se)})}var re=r(Z,2);{var le=e=>{var o=xe(),t=J(o);p(t,()=>({"--remote-button-color":"rgb(74 222 128)"})),c(t.lastChild,{label:"Power",clickHandler:()=>a("power")}),s(t),m(e,o)};P(re,e=>{var o,t;((t=(o=f(h))==null?void 0:o.kiosk)==null?void 0:t.powerControls)!==!1&&e(le)})}s(V);var z=r(V,2);{var ae=e=>{var o=He(),t=u(o);p(t,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(t.lastChild,{label:"1",clickHandler:()=>a("1")}),s(t);var v=r(t,2);p(v,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(v.lastChild,{label:"2",clickHandler:()=>a("2")}),s(v);var d=r(v,2);p(d,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(d.lastChild,{label:"3",clickHandler:()=>a("3")}),s(d);var b=r(d,2);p(b,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(b.lastChild,{label:"4",clickHandler:()=>a("4")}),s(b);var n=r(b,2);p(n,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(n.lastChild,{label:"5",clickHandler:()=>a("5")}),s(n);var H=r(n,2);p(H,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(H.lastChild,{label:"6",clickHandler:()=>a("6")}),s(H);var g=r(H,2);p(g,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(g.lastChild,{label:"7",clickHandler:()=>a("7")}),s(g);var C=r(g,2);p(C,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(C.lastChild,{label:"8",clickHandler:()=>a("8")}),s(C);var S=r(C,2);p(S,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(S.lastChild,{label:"9",clickHandler:()=>a("9")}),s(S);var q=r(S,4);p(q,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(q.lastChild,{label:"0",clickHandler:()=>a("0")}),s(q),s(o),m(e,o)};P(z,e=>{var o,t;((t=(o=f(h))==null?void 0:o.kiosk)==null?void 0:t.channelControls)!==!1&&e(ae)})}var F=r(z,2),G=u(F);{var ne=e=>{var o=Pe(),t=r(u(o));p(t,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(t.lastChild,{clickHandler:()=>a("volumeUp"),children:(d,b)=>{M();var n=j("+");m(d,n)},$$slots:{default:!0}}),s(t);var v=r(t,2);p(v,()=>({"--remote-button-color":"rgb(230,230,230)"})),c(v.lastChild,{clickHandler:()=>a("volumeDown"),children:(d,b)=>{M();var n=j("-");m(d,n)},$$slots:{default:!0}}),s(v),s(o),m(e,o)};P(G,e=>{var o,t;((t=(o=f(h))==null?void 0:o.kiosk)==null?void 0:t.volumeControls)!==!1&&e(ne)})}var ce=r(G,2);{var ie=e=>{var o=$e(),t=r(u(o));p(t,()=>({"--remote-button-color":"#C6956D"})),c(t.lastChild,{clickHandler:()=>a("channelUp"),children:(d,b)=>{M();var n=j("+");m(d,n)},$$slots:{default:!0}}),s(t);var v=r(t,2);p(v,()=>({"--remote-button-color":"#C6956D"})),c(v.lastChild,{clickHandler:()=>a("channelDown"),children:(d,b)=>{M();var n=j("-");m(d,n)},$$slots:{default:!0}}),s(v),s(o),m(e,o)};P(ce,e=>{var o,t;((t=(o=f(h))==null?void 0:o.kiosk)==null?void 0:t.channelControls)!==!1&&e(ie)})}s(F),s(Y),s(W),s(O),s(N),m(U,N),ve()}ee(["click"]);export{Ye as component};
